-- Create Enum for CorporateActionEnum, CurrencyEnum, and StatusEnum
CREATE TYPE corporate_action_enum AS ENUM (
    'CASH_DIVIDEND', 
    'STOCK_DIVIDEND', 
    'SPECIAL_DIVIDEND', 
    'STOCK_SPLIT', 
    'RIGHTS_ISSUE'
);

-- Create Enum for CurrencyEnum with the provided currencies
CREATE TYPE currency_enum AS ENUM (
    'AED', 'AFN', 'ALL', 'AMD', 'ANG', 'AOA', 'ARS', 'AUD', 'AWG', 'AZN', 
    'BAM', 'BBD', 'BDT', 'BGN', 'BHD', 'BIF', 'BMD', 'BND', 'BOB', 'BRL', 
    'BSD', 'BTN', 'BWP', 'BYN', 'BZD', 'CAD', 'CDF', 'CHF', 'CLP', 'CNY', 
    'COP', 'CRC', 'CUP', 'CVE', 'CZK', 'DJF', 'DKK', 'DOP', 'DZD', 'EGP', 
    'ERN', 'ETB', 'EUR', 'FJD', 'FKP', 'GBP', 'GEL', 'GHS', 'GIP', 'GMD', 
    'GNF', 'GTQ', 'GYD', 'HKD', 'HNL', 'HRK', 'HTG', 'HUF', 'IDR', 'ILS', 
    'INR', 'IQD', 'IRR', 'ISK', 'JMD', 'JOD', 'JPY', 'KES', 'KGS', 'KHR', 
    'KMF', 'KRW', 'KWD', 'KYD', 'KZT', 'LAK', 'LBP', 'LKR', 'LRD', 'LSL', 
    'LTL', 'LVL', 'LYD', 'MAD', 'MDL', 'MGA', 'MKD', 'MMK', 'MNT', 'MOP', 
    'MRU', 'MUR', 'MVR', 'MWK', 'MXN', 'MYR', 'MZN', 'NAD', 'NGN', 'NIO', 
    'NOK', 'NPR', 'NZD', 'OMR', 'PAB', 'PEN', 'PGK', 'PHP', 'PKR', 'PLN', 
    'PYG', 'QAR', 'RON', 'RSD', 'RUB', 'RWF', 'SAR', 'SBD', 'SCR', 'SDG', 
    'SEK', 'SGD', 'SHP', 'SLL', 'SOS', 'SRD', 'SSP', 'STN', 'SYP', 'SZL', 
    'THB', 'TJS', 'TMT', 'TND', 'TOP', 'TRY', 'TTD', 'TWD', 'TZS', 'UAH', 
    'UGX', 'USD', 'UYU', 'UZS', 'VEF', 'VND', 'VUV', 'WST', 'XAF', 'XCD', 
    'XOF', 'YER', 'ZAR', 'ZMK', 'ZWL'
);

-- Updated Status Enum
CREATE TYPE status_enum AS ENUM (
    'OPEN', 
    'PENDING', 
    'CLOSED'
);

-- Create the ENUM type for IdentifierType
CREATE TYPE identifier_type_enum AS ENUM (
    'Ticker',
    'ISIN',
    'CUSIP',
    'SEDOL',
    'WKN',
    'LEI',
    'FIGI',
    'RIC',
    'MIC'
);

CREATE TYPE asset_class_enum AS ENUM ('EQUITY', 'FIXED_INCOME');
CREATE TYPE tax_type_enum AS ENUM ('GROSS', 'NET');
CREATE TYPE weighting_methodology_enum AS ENUM ('PRICE', 'MARKET_CAP', 'EQUALLY');

CREATE TABLE portfolio (
    id SERIAL PRIMARY KEY,
    symbol VARCHAR(100) NOT NULL UNIQUE,
    currency currency_enum NOT NULL,
    asset_class asset_class_enum NOT NULL,
    tax_type tax_type_enum NOT NULL,
    weighting_methodology weighting_methodology_enum NOT NULL
);

-- Create the equity table
CREATE TABLE equity (
    id SERIAL PRIMARY KEY,
    symbol VARCHAR(10000) NOT NULL UNIQUE,
    company_name VARCHAR(100) NOT NULL,
    sector VARCHAR(100),
    industry VARCHAR(100),
    price FLOAT NOT NULL,
    currency VARCHAR(10) DEFAULT 'USD',
    volume INTEGER NOT NULL
);


-- Create the corporate_action table with equity_id as a foreign key
CREATE TABLE corporate_action (
    id SERIAL PRIMARY KEY,
    company_name VARCHAR(255) NOT NULL,
    action_type corporate_action_enum NOT NULL,
    record_date TIMESTAMP NOT NULL,
    effective_date TIMESTAMP NOT NULL,
    currency currency_enum NOT NULL,
    status status_enum NOT NULL,
    details VARCHAR(500) NOT NULL,

);


CREATE TABLE stock_split (
    id SERIAL PRIMARY KEY,
    split_rate FLOAT NOT NULL,
    declaration_date TIMESTAMP NOT NULL,
    ex_dividend_date TIMESTAMP NOT NULL,
    record_date TIMESTAMP NOT NULL,
    payment_date TIMESTAMP NOT NULL
);


CREATE TABLE stock_dividend (
    id SERIAL PRIMARY KEY,
    dividend_rate FLOAT NOT NULL,
    declaration_date TIMESTAMP NOT NULL,
    ex_dividend_date TIMESTAMP NOT NULL,
    record_date TIMESTAMP NOT NULL,
    payment_date TIMESTAMP NOT NULL
);

CREATE TABLE special_dividend (
    id SERIAL PRIMARY KEY,
    dividend_amount NUMERIC NOT NULL,
    declaration_date TIMESTAMP NOT NULL,
    ex_dividend_date TIMESTAMP NOT NULL,
    record_date TIMESTAMP NOT NULL,
    payment_date TIMESTAMP NOT NULL
);


CREATE TABLE cash_dividend (
    id SERIAL PRIMARY KEY,
    dividend_amount NUMERIC NOT NULL,
    declaration_date TIMESTAMP NOT NULL,
    ex_dividend_date TIMESTAMP NOT NULL,
    record_date TIMESTAMP NOT NULL,
    payment_date TIMESTAMP NOT NULL
);

CREATE TABLE rights_issue (
    id SERIAL PRIMARY KEY,
    announcement_date TIMESTAMP NOT NULL,
    offer_price FLOAT NOT NULL,
    offer_ratio FLOAT NOT NULL,
    record_date TIMESTAMP NOT NULL,
    subscription_start_date TIMESTAMP NOT NULL,
    subscription_end_date TIMESTAMP NOT NULL,
    total_shares_offered FLOAT NOT NULL,
    use_of_proceeds VARCHAR(255),
);


